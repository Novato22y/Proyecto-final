<aside class="barra-lateral">
    <div class="iconos-superior">
        <!-- botón de alternar Sol/Luna (mover arriba) -->
        <button id="toggle-sun-moon" class="enlace-icono" title="Modo día/noche" aria-pressed="false" style="background:none;border:none;cursor:pointer;padding:6px;">
            <!-- Icono inicial (se actualizará por JS según localStorage) -->
            <svg id="icon-sun-moon" xmlns="http://www.w3.org/2000/svg" class="tamano-icono" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <!-- Sol simple y legible -->
                <circle cx="12" cy="12" r="4" />
                <g stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
                  <line x1="12" y1="1" x2="12" y2="4" />
                  <line x1="12" y1="20" x2="12" y2="23" />
                  <line x1="1" y1="12" x2="4" y2="12" />
                  <line x1="20" y1="12" x2="23" y2="12" />
                  <line x1="4.2" y1="4.2" x2="6.3" y2="6.3" />
                  <line x1="17.7" y1="17.7" x2="19.8" y2="19.8" />
                  <line x1="4.2" y1="19.8" x2="6.3" y2="17.7" />
                  <line x1="17.7" y1="6.3" x2="19.8" y2="4.2" />
                </g>
            </svg>
        </button>

    <a href="{{ url_for('main.principal') }}" class="enlace-icono {% if request.endpoint == 'main.principal' %}icono-activo{% endif %}" title="Ir a Principal">
            <svg xmlns="http://www.w3.org/2000/svg" class="tamano-icono" viewBox="0 0 24 24" fill="currentColor">
                <path d="M3 11.5L12 4l9 7.5V20a2 2 0 0 1-2 2h-3a1 1 0 0 1-1-1v-4h-4v4a1 1 0 0 1-1 1H5a2 2 0 0 1-2-2V11.5z"/>
                <path d="M9 22V12h6v10" fill="none" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </a>
    <a href="{{ url_for('main.ver_pomodoro') }}" class="enlace-icono {% if request.endpoint == 'main.ver_pomodoro' %}icono-activo{% endif %}" title="Ir a Pomodoro">
            <svg xmlns="http://www.w3.org/2000/svg" width="20.088" height="24.11" viewBox="0 0 20.088 24.11" fill="currentColor">
                <path d="M10.044 24.11a10.029 10.029 0 0 0 6.794-17.42L18.8 4.729l-1.415-1.414-2.162 2.161a9.958 9.958 0 0 0-4.179-1.4V2h2.048V0h-6v2h1.952v2.073a10.043 10.043 0 0 0 1 20.037zm-1-10.655v-5.3h2v5.3a1.5 1.5 0 1 1-2 0z"/>
            </svg>
        </a>
        <!-- contenedor para iconos inyectados por JS -->
        <span id="sidebar-social-icons"></span>
        <a href="#" id="open-social-modal" class="enlace-icono" title="Más redes">
            <svg xmlns="http://www.w3.org/2000/svg" class="tamano-icono" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.477 2 2 6.477 2 12c0 5.523 4.477 10 10 10s10-4.477 10-10c0-5.523-4.477-10-10-10z"/>
            </svg>
        </a>
    </div>
    <div class="iconos-inferior">
        <div class="perfil-container">
            <a href="{{ url_for('main.profile') }}" class="enlace-icono {% if request.endpoint == 'main.profile' %}icono-activo{% endif %}" title="Perfil">
                <img src="{{ url_for('static', filename=current_user.profile_image) if current_user.is_authenticated and current_user.profile_image else url_for('static', filename='images/user_default.png') }}" alt="Usuario" class="perfil-imagen" />
            </a>
            {% if current_user.is_authenticated %}
                <span class="tooltip-nombre" style="position:absolute;left:50%;top:-32px;transform:translateX(-50%);background:#4c4cff;color:#fff;padding:3px 10px;border-radius:7px;font-size:0.80rem;white-space:nowrap;opacity:0;pointer-events:none;transition:opacity 0.2s;z-index:10;">{{ current_user.name }}</span>
                <script>
                document.addEventListener('DOMContentLoaded', function() {
                    var icono = document.querySelector('.iconos-inferior .enlace-icono img');
                    var tooltip = document.querySelector('.iconos-inferior .tooltip-nombre');
                    if(icono && tooltip) {
                        icono.addEventListener('mouseenter', function() { tooltip.style.opacity = '1'; });
                        icono.addEventListener('mouseleave', function() { tooltip.style.opacity = '0'; });
                    }
                });
                </script>
            {% endif %}
            {% if current_user.is_authenticated and current_user.is_admin %}
            <a href="{{ url_for('admin.list_users') }}" class="enlace-icono {% if request.endpoint == 'admin.list_users' %}icono-activo{% endif %}" title="Panel de Admin">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <circle cx="12" cy="12" r="3"/>
  <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33 1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82 1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
</svg>
            </a>
        {% endif %}
        </div>
    </div>
</aside>

<!-- Social modal (uniforme) -->
<div id="social-modal" class="modal-lateral" style="display:none;">
    <div class="modal-lateral-content">
        <button class="close-lateral-modal" style="float:right;">&times;</button>
        <h4>Redes sociales</h4>
        <div id="modal-social-icons" style="display:flex;flex-wrap:wrap;gap:8px;margin-top:12px;"></div>
    </div>
</div>

<!-- Sidebar script (loads once when sidebar is included) -->
<script src="{{ url_for('static', filename='js/sidebar-social.js') }}"></script>
